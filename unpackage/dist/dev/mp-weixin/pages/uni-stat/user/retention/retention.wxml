<view class="fix-top-window"><view class="uni-header"><uni-stat-breadcrumb class="uni-stat-breadcrumb-on-phone" vue-id="fa9175f0-1" bind:__l="__l"></uni-stat-breadcrumb><view class="uni-group"><view class="uni-sub-title hide-on-phone">用户留存趋势分析</view></view></view><view class="uni-container"><view class="uni-stat--x flex p-1015"><uni-data-select vue-id="fa9175f0-2" collection="opendb-app-list" field="appid as value, name as text" orderby="text asc" defItem="{{1}}" label="应用选择" clear="{{false}}" value="{{query.appid}}" data-event-opts="{{[['^change',[['changeAppid']]],['^input',[['__set_model',['$0','appid','$event',[]],['query']]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></uni-data-select><uni-data-select bind:input="__e" class="ml-m" vue-id="fa9175f0-3" collection="opendb-app-versions" where="{{versionQuery}}" field="_id as value, version as text, uni_platform as label, create_date as date" format="{label} - {text}" orderby="date desc" label="版本选择" value="{{query.version_id}}" data-event-opts="{{[['^input',[['__set_model',['$0','version_id','$event',[]],['query']]]]]}}" bind:__l="__l"></uni-data-select></view><view class="uni-stat--x flex"><uni-stat-tabs vue-id="fa9175f0-4" label="日期选择" current="{{currentDateTab}}" mode="date" yesterday="{{false}}" data-event-opts="{{[['^change',[['changeTimeRange']]]]}}" bind:change="__e" bind:__l="__l"></uni-stat-tabs><uni-datetime-picker class="{{['uni-stat-datetime-picker',($root.g0)?'uni-stat__actived':'']}}" vue-id="fa9175f0-5" type="daterange" end="{{$root.g1}}" returnType="timestamp" clearIcon="{{false}}" value="{{query.start_time}}" data-event-opts="{{[['^change',[['useDatetimePicker']]],['^input',[['__set_model',['$0','start_time','$event',[]],['query']]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></uni-datetime-picker></view><view class="uni-stat--x"><uni-stat-tabs vue-id="fa9175f0-6" label="平台选择" type="boldLine" mode="platform" value="{{query.platform_id}}" data-event-opts="{{[['^change',[['changePlatform']]],['^input',[['__set_model',['$0','platform_id','$event',[]],['query']]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></uni-stat-tabs><block wx:if="{{$root.g2}}"><uni-data-select bind:input="__e" class="p-channel vue-ref" vue-id="fa9175f0-7" collection="uni-stat-app-channels" where="{{channelQuery}}" field="_id as value, channel_name as text" orderby="text asc" label="渠道/场景值选择" data-ref="version-select" value="{{query.channel_id}}" data-event-opts="{{[['^input',[['__set_model',['$0','channel_id','$event',[]],['query']]]]]}}" bind:__l="__l"></uni-data-select></block></view><view class="uni-stat--x mb-m" style="padding-top:0;"><view class="mb-m line-bottom"><uni-stat-tabs bind:input="__e" style="line-height:40px;margin-bottom:-17px;" vue-id="fa9175f0-8" type="boldLine" tabs="{{fields}}" tooltip="{{true}}" value="{{field}}" data-event-opts="{{[['^input',[['__set_model',['','field','$event',[]]]]]]}}" bind:__l="__l"></uni-stat-tabs></view><uni-stat-tabs bind:input="__e" class="mb-l" vue-id="fa9175f0-9" type="box" tabs="{{keys}}" value="{{key}}" data-event-opts="{{[['^input',[['__set_model',['','key','$event',[]]]]]]}}" bind:__l="__l"></uni-stat-tabs><view class="p-m"><view class="uni-charts-box"><qiun-data-charts vue-id="fa9175f0-10" type="area" chartData="{{chartData}}" echartsH5="{{true}}" echartsApp="{{true}}" errorMessage="{{errorMessage}}" bind:__l="__l"></qiun-data-charts></view></view></view><view class="uni-stat--x p-m"><view class="uni-tips mb-s flex"><uni-icons vue-id="fa9175f0-11" type="info" bind:__l="__l"></uni-icons>表格中显示为空，表示留存为 0 或无数据</view><uni-table vue-id="fa9175f0-12" loading="{{loading}}" stripe="{{true}}" emptyText="{{$root.m0}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-tr style="background-color:#eee;" vue-id="{{('fa9175f0-13')+','+('fa9175f0-12')}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{fieldsMap}}" wx:for-item="mapper" wx:for-index="index" wx:key="index"><block><block wx:if="{{mapper.title}}"><uni-th vue-id="{{('fa9175f0-14-'+index)+','+('fa9175f0-13')}}" align="center" bind:__l="__l" vue-slots="{{['default']}}">{{mapper.title}}</uni-th></block></block></block></uni-tr><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="i" wx:key="i"><uni-tr vue-id="{{('fa9175f0-15-'+i)+','+('fa9175f0-12')}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{item.l0}}" wx:for-item="mapper" wx:for-index="index" wx:key="index"><block><block wx:if="{{mapper.$orig.title}}"><uni-td class="{{[mapper.g3]}}" vue-id="{{('fa9175f0-16-'+i+'-'+index)+','+('fa9175f0-15-'+i)}}" align="center" bind:__l="__l" vue-slots="{{['default']}}">{{''+(item.$orig[mapper.$orig.field]?item.$orig[mapper.$orig.field]:'')+''}}</uni-td></block></block></block></uni-tr></block></uni-table><view class="uni-pagination-box"><uni-pagination vue-id="fa9175f0-17" show-icon="{{true}}" show-page-size="{{true}}" page-size="{{options.pageSize}}" current="{{options.pageCurrent}}" total="{{options.total}}" data-event-opts="{{[['^change',[['changePageCurrent']]],['^pageSizeChange',[['changePageSize']]]]}}" bind:change="__e" bind:pageSizeChange="__e" bind:__l="__l"></uni-pagination></view></view></view><fix-window vue-id="fa9175f0-18" bind:__l="__l"></fix-window></view>